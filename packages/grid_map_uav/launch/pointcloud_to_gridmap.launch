<?xml version="1.0" encoding="UTF-8"?>

<launch>
  <arg name="folder_path"            default="$(find grid_map_uav)/data"/>
  <arg name="pcd_filename"           default="plane_noisy.pcd" />
  <arg name="map_rosbag_topic"       default="grid_map" />
  <arg name="output_grid_map"        default="elevation_map.bag" />
  <arg name="map_frame"              default="map" />
  <arg name="map_layer_name"         default="elevation" />
  <arg name="prefix"                 default=""/>
  <arg name="set_verbosity_to_debug" default="false"/>
    
  <node pkg="grid_map_uav" name="pointcloud_to_gridmap" type="pointcloud_to_gridmap" 
        output="screen"  launch-prefix="$(arg prefix)">
    <rosparam file="$(find grid_map_uav)/config/pointcloud_to_gridmap.yaml" />
    <param name="pcd_filename"            type="string" value="$(arg pcd_filename)" />
    <param name="map_rosbag_topic"        type="string" value="$(arg map_rosbag_topic)" />
    <param name="output_grid_map"         type="string" value="$(arg output_grid_map)" />
    <param name="map_frame"               type="string" value="$(arg map_frame)" />
    <param name="map_layer_name"          type="string" value="$(arg map_layer_name)" />
    <param name="folder_path"             type="string" value="$(arg folder_path)" />
    <param name="set_verbosity_to_debug"  type="bool" value="$(arg set_verbosity_to_debug)" />
    <rosparam command="load" file="$(find grid_map_uav)/config/filters_demo_filter_chain.yaml" />
  </node>
  
  <rosparam file="$(find grid_map_uav)/config/pointcloud_to_gridmap.yaml" command="load"/>

    <!-- Launch the grid map visualizer -->
  <node pkg="grid_map_visualization" type="grid_map_visualization" name="grid_map_visualization" output="screen" />

  <!-- Launch RViz with the demo configuration -->
  <node name="rviz" pkg="rviz" type="rviz" args="-d $(find grid_map_uav)/rviz/filters_demo.rviz" />
</launch>