<launch>
    <param name="/use_sim_time" value="true" />

    <node name="add_g" pkg="tp_slam" type="add_imu_gravity" output="screen">
        <remap from="imu_in" to="/imu" />
        <remap from="imu_out" to="/slam/imu" />
    </node>

    <node name="cartographer_node" pkg="cartographer_ros"
        type="cartographer_node" args="
            -configuration_directory $(find tp_slam)/configs
            -configuration_basename single_sensor_localization.lua
            -load_state_filename $(find tp_slam)/map/hospital-2022-05-06-16-22-00.pbstream"
        output="screen">
        <remap from="scan" to="/scan/point1" />
        <remap from="imu" to="/slam/imu" />
    </node>

    <node name="cartographer_occupancy_grid_node" pkg="cartographer_ros"
        type="cartographer_occupancy_grid_node" args="-resolution 0.05
                                                      -pure_localization 0" />

    <node name="rviz" pkg="rviz" type="rviz" required="true"
        args="-d $(find cartographer_ros)/configuration_files/demo_2d.rviz" />


</launch>